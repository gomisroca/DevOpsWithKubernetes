# Networking between Pods

We will now focus on communication between pods.

K8s includes a DNS service, so comms between pods and containers in k8s is similar to comms between containers in Docker Compose. Containers in a pod share the network, so every other container in the pod can be accessed from localhost. For communication between pods, Services are used to expose the pods as a network service.

For example, this service enables other pods to access port 3000 of the todo-backend app:

```yaml
apiVersion: v1
kind: Service
metadata:
  name: todo-backend-svc
spec:
  type: ClusterIP
  selector:
    app: todo-backend
  ports:
    - port: 2345
      protocol: TCP
      targetPort: 3000
```

Additionally, each Pod has an IP provided by k8s.

### A Debugging Pod

Many times we will need to manually test what's going on. We can use `busybox`, a lightweight Linux distro for debugging, and start a pod with it:

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: my-busybox
  labels:
    app: my-busybox
spec:
  containers:
    - image: busybox
      command:
        - sleep
        - "3600"
      imagePullPolicy: IfNotPresent
      name: busybox
  restartPolicy: Always
```

Note the resource is not a Deployment, but a Pod. We can exec a command into the pod: `kubectl exec -it my-busybox -- wget -qO - http://todo-backend-svc:2345`. With `kubectl describe pod <pod-name>` we can see the IP of the pod. We could then replace `http://todo-backend-svc:2345` with `http://<pod-ip>:3000`.

After we are done, we should delete the pod: `kubectl delete pod/my-busybox`.
