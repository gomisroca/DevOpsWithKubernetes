# Kubernetes Internals

K8s is a layer on top of which we run our apps. It takes resources that are accessible from the layers below. It manages the apps and resources, and provides services to the apps.

### Controllers

Controllers watch the state of the cluster, and tries to make the state match the desired state. There are a number of controllers for different responsabilities, i.e the Replication Controller, which ensures that the number of replicas matches the desired number set in the Deployment.

### Kubernetes Control Plane

The KCP is responsible for managing the cluster. It is the primary responsible for the state of the cluster, it makes global decisions about the cluster and responds to events.

It consists of:

- etcd: a key-value store, used for storing all cluster data.
- kube-scheduler: decides on which node a Pod should run on.
- kube-controller-manager: decides which controllers should run on which nodes.
- kube-apiserver: exposes the KCP through an API.

### Node Components

Every node has a number of components that mantain it:

- kubelet: makes sure containers are running in a Pod.
- kube-proxy: network proxy and maintains the network rules. Enables connections in and out of the cluster.

### Addons

Kubernetes has a number of addons that can be installed to provide additional functionality. We can check the resources created by addons with `kubectl -n kube-system get all`.
